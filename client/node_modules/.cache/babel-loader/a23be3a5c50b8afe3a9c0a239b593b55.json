{"ast":null,"code":"import { createAsyncThunk } from '@reduxjs/toolkit';\nimport axios from 'axios';\nimport { createSlice } from '@reduxjs/toolkit';\nexport const getItems = createAsyncThunk('items/getItems', async () => {\n  try {\n    const response = await axios.get('/api/items');\n    return response.data.data;\n  } catch (error) {\n    return error.response.data.error;\n  }\n});\nexport const addItem = createAsyncThunk('items/addItem', async newItemPost => {\n  const config = {\n    header: {\n      'Content-Type': 'application/json'\n    }\n  };\n\n  try {\n    const response = await axios.post('/api/items', newItemPost, config);\n    axios.post('/api/items', newItemPost, config).then(res => {\n      console.log(res.data);\n      return res.data.data.items;\n    });\n  } catch (error) {\n    return error.response.data.error;\n  }\n});\nexport const deleteItem = createAsyncThunk('items/deleteItem', async itemId => {\n  try {\n    axios.delete(`/api/items/${itemId}`).then(res => {\n      return itemId;\n    });\n  } catch (error) {\n    return error.response.data.error;\n  }\n});\nexport const ItemReducers = createSlice({\n  name: 'items',\n  initialState: {\n    items: [],\n    error: null,\n    loading: false\n  },\n  reducers: {\n    GET_ITEMS: (state, action) => {\n      return { ...state,\n        loading: false,\n        items: action.payload\n      };\n    },\n    ADD_ITEM: (state, action) => {\n      return { ...state,\n        items: [...state.items, action.payload]\n      };\n    },\n    DELETE_ITEM: (state, action) => {\n      return { ...state,\n        items: state.items.filter(item => item.id !== action.payload)\n      };\n    },\n    EDIT_ITEM: (state, action) => {\n      const {\n        id,\n        name\n      } = action.payload;\n      const existItem = state.items.find(item => item.id === id);\n\n      if (existItem) {\n        existItem.name = name;\n      }\n    },\n    ITEMS_LOADING: state => {\n      return { ...state,\n        loading: true\n      };\n    },\n    ITEMS_ERROR: (state, action) => {\n      return { ...state,\n        error: action.payload\n      };\n    }\n  },\n  extraReducers: {\n    [getItems.pending]: (state, action) => {\n      state.loading = true;\n    },\n    [getItems.fulfilled]: (state, action) => {\n      console.log(action.payload); // state.loading = false\n      // state.items = state.items.concat(action.payload)\n\n      console.log(state);\n      return { ...state,\n        loading: false,\n        items: action.payload\n      };\n    },\n    [addItem.fulfilled]: (state, action) => {\n      return { ...state,\n        items: [...state.items, action.payload]\n      };\n    },\n    [deleteItem]: (state, action) => {\n      return { ...state,\n        items: state.items.filter(item => item.id !== action.payload)\n      };\n    }\n  }\n});\nexport const {\n  GET_ITEMS,\n  ADD_ITEM,\n  DELETE_ITEM,\n  ITEMS_LOADING,\n  ITEMS_ERROR,\n  EDIT_ITEM\n} = ItemReducers.actions;\nexport const selectItem = state => state.item.items;\nexport default ItemReducers.reducer;","map":{"version":3,"sources":["C:/Users/User/Documents/myExpressApp/React/mern_shopping_list/client/src/reducers/ItemReducers.js"],"names":["createAsyncThunk","axios","createSlice","getItems","response","get","data","error","addItem","newItemPost","config","header","post","then","res","console","log","items","deleteItem","itemId","delete","ItemReducers","name","initialState","loading","reducers","GET_ITEMS","state","action","payload","ADD_ITEM","DELETE_ITEM","filter","item","id","EDIT_ITEM","existItem","find","ITEMS_LOADING","ITEMS_ERROR","extraReducers","pending","fulfilled","actions","selectItem","reducer"],"mappings":"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","sourcesContent":["import { createAsyncThunk } from '@reduxjs/toolkit';\r\nimport axios from 'axios';\r\nimport { createSlice } from '@reduxjs/toolkit'\r\n\r\n\r\n\r\nexport const getItems = createAsyncThunk('items/getItems', async () =>{\r\n   try {\r\n      const response = await axios.get('/api/items')\r\n      return response.data.data\r\n   } catch (error) {\r\n      return error.response.data.error\r\n   }\r\n});\r\nexport const addItem = createAsyncThunk('items/addItem', async (newItemPost) =>{\r\n   const config = {\r\n      header: {\r\n         'Content-Type': 'application/json'\r\n      }\r\n   }\r\n   try {\r\n      const response = await axios.post('/api/items', newItemPost, config)\r\n      \r\n      axios\r\n        .post('/api/items', newItemPost, config)\r\n        .then(res => {\r\n           console.log(res.data)\r\n           return res.data.data.items\r\n        }  )\r\n   } catch (error) {\r\n      return error.response.data.error\r\n      \r\n   }\r\n\r\n})\r\n\r\nexport const deleteItem = createAsyncThunk('items/deleteItem', async (itemId) =>{\r\n   try {\r\n      axios\r\n        .delete(`/api/items/${itemId}`)\r\n        .then(res => {\r\n            return (itemId)\r\n        })\r\n   } catch (error) {         \r\n      return error.response.data.error\r\n      \r\n   }\r\n})\r\n\r\nexport const ItemReducers = createSlice({\r\n   name: 'items',\r\n   initialState: {\r\n      items: [],\r\n      error: null,\r\n      loading: false\r\n   },\r\n   reducers: {\r\n      GET_ITEMS: (state, action) => {\r\n         return {\r\n            ...state,\r\n            loading: false,\r\n            items: action.payload,\r\n         }\r\n      },\r\n      ADD_ITEM: (state, action) => {\r\n         return {\r\n            ...state,\r\n            items: [...state.items, action.payload]\r\n         }\r\n      },\r\n      DELETE_ITEM: (state, action) => { \r\n         return {\r\n            ...state,\r\n            items:  state.items.filter(item => item.id !==action.payload)\r\n         }\r\n      },\r\n      EDIT_ITEM: (state, action) => {\r\n         const { id, name} = action.payload\r\n         const existItem = state.items.find(item => item.id === id)\r\n         if(existItem){\r\n            existItem.name = name\r\n         }\r\n      },\r\n      ITEMS_LOADING: (state) =>{\r\n         return{\r\n            ...state,\r\n            loading: true \r\n         }\r\n      },\r\n      ITEMS_ERROR: (state, action) =>{\r\n         return {\r\n            ...state,\r\n            error: action.payload\r\n         }\r\n      }\r\n   }, \r\n   extraReducers: {\r\n      [getItems.pending]: (state, action) =>{\r\n         state.loading = true\r\n      },\r\n      [getItems.fulfilled]:  (state, action) => {\r\n         console.log(action.payload)\r\n         // state.loading = false\r\n         // state.items = state.items.concat(action.payload)\r\n         console.log(state)\r\n         return {\r\n            ...state,\r\n            loading: false,\r\n            items: action.payload,\r\n         }\r\n\r\n      },\r\n      [addItem.fulfilled]: (state, action) => {\r\n         return {\r\n            ...state,\r\n            items: [...state.items, action.payload]\r\n         }\r\n      },\r\n      [deleteItem]: (state, action) => { \r\n         return {\r\n            ...state,\r\n            items:  state.items.filter(item => item.id !==action.payload)\r\n         }\r\n      },\r\n   }\r\n});\r\n\r\nexport const { GET_ITEMS, ADD_ITEM, DELETE_ITEM, ITEMS_LOADING, ITEMS_ERROR, EDIT_ITEM } = ItemReducers.actions\r\nexport const selectItem = state => state.item.items\r\n\r\n\r\nexport default ItemReducers.reducer;\r\n"]},"metadata":{},"sourceType":"module"}